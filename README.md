# 📖WebNovelService
**웹 소설 서비스 백엔드 클론코딩**
### API
- [API 링크](https://jade97.notion.site/API-4bd0995de6a84a49a63dc625ed69dbdd)

### ERD
![다운로드 (1)](https://user-images.githubusercontent.com/110963294/234262228-914cabe1-1bee-4f8f-bd47-7c6888575960.png)

### 서비스 인포메이션
👤 - 사람 이모티콘은 로그인이 필요한 기능임.

- 미 로그인 상태에서 해당기능을 수행할 경우 ‘로그인이 필요합니다’ 알림

**헤더**

- 로고 (클릭시 메인화면으로 이동)
- 검색 (소설 제목/작가로 검색)
- 선호도 👤
- 구매 리스트 👤
- 로그인 상태

**로그인 화면**

- 로그인
- 회원가입 페이지 이동

**회원가입 화면**

- 회원가입

**선호도 화면**

- 선호 작품 목록 조회 👤

**메인 화면 (홈 / 전체소설 / 장르별 3가지로 분류됨)**

**홈 화면 (모두 10개가 노출됨)**

- 홈 노출
- 최근 업데이트 소설
- 일일 전체 조회 베스트
- 일일 유료 조회 베스트
- 일일 무료 조회 베스트

- 일일 조회 베스트
    
    Redis를 이용하여 일일 조회 베스트를 노출할 예정.
    
    - 정각에 모든 데이터 삭제
    - Key: 소설의 id , Value: Hash(Key: PaymentType,(PAID, FREE),Value: +1 )
    - 조회 시 Redis에 데이터를 추가, 똑같은 novelId와 거래 유형일 경우 해시 값에 1을 더한다.
        - 해시 값은 조회수 순위를 구할때 쓰인다.

**전체 소설 화면**

- 최근 에피소드가 업데이트 된 순으로 모든 소설 조회
    - 10개씩 페이징

**장르별 화면**

- 최근 에피소드가 업데이트 된 순으로 해당 장르 소설 조회
    - 10개씩 페이징

**소설 상세보기 화면** 

- 선호 작품 추가/해제 👤
- 소설의 각 에피소드 조회
- 소장안한 에피소드 구매 👤
- 소장한 에피소드 열람 👤

거래 목록

**포인트 충전  및 소모 목록**

- 최신 생성 날짜 내림차순으로 정렬
- 10개씩 페이징

**티켓** **충전  및 소모 목록**

- 최신 생성 날짜 내림차순으로 정렬
- 10개씩 페이징
### 피드백
- 프로젝트의 도메인 구조를 깔끔하게 풀어냈습니다.
- 가독성도 상당히 신경써서 만드셔서 보기 좋았습니다.
    - validate, 비즈니스 로직을 순서대로 깔끔하게 처리하는 부분이 정석적으로 개발을 진행하셨다는 생각이 들었습니다.
- 테스트 코드에서 정책을 풀어냈습니다.
    - 정상케이스
    - 비즈니스 로직 상 오류가 발생해야할 케이스
    - 케이스별로 분리하여 테스트를 작성해서 테스트코드만 보더라도 어떤 정책들이 있는지 예상할 수 있었습니다.
- 데이터베이스에서 기록을 추적하기 어렵게 되어있는 것이 다소 아쉽습니다만 동시성에 대한 처리가 다른 프로젝트에 비해서 가장 깔끔하게 돼있습니다.
    - 동시성 처리가 완벽하진 않습니다. 티켓에 대한 구매와 포인트 충전이 동시에 일어나면 어떨까요 ?
    - 그래도 다른 과제에 비해서 가장 잘 처리됐다고 생각하고 미흡한 부분만 개선하면 운영환경에서 사용될 수 있는 결과물이 될 것이라 생각합니다.
- 추후 더 고민해보면 좋을 내용
 - 티켓에 포인트 기록을 링크하지 않아도 괜찮을까요 ?
    - 만약에 운영 중 포인트 소모기록이나 충전기록이 생기는 것이 누락되거나 잘못 잔액이 계산된다면 어떻게 대응하나요 ?
    - 거래후 잔액을 보고 계산하나요 ?
    - 그런데 읽기 트랜잭션의 뷰카운트 계산 부분들은 제대로 동작하고 있는 것이 맞나요 ?


 - 추가 질문거리
    - Lettuce vs Jedis. 사용 근거는 어떻게 될까요 ?
    - 레디스는 운영에서 사용될때 이중화/클러스터링 되어 사용됩니다. 이 때 드라이버 라이브러리의 기능도 약간의 제한이 생기는데, 다음 기회에는 클러스터도 구성해보셔서 테스트해보시면 좋을 것 같습니다.
